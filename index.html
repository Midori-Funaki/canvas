
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Canvas Project</title>        
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--CSS Libraries-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
		<link rel="stylesheet" href="styles/main.css">
		<link href="https://fonts.googleapis.com/css?family=Metrophobic" rel="stylesheet">
	</head>

	<body>
		<div class="menuOpen"><img class="img-responsive" src="images/palette.png"></div>
		<div id="menu" class="mobileHidden">
			<!--Main Tools-->
			<div id="toolsMenu">
				<div class="toolsDropdownButton inactive"><img class="img-responsive" src="images/pencil.png"></div>
				<div class="toolsDropdown mobileHidden">
					<div class="toolButton pencilButton active"><img class="img-responsive" src="images/pencil.png"></div>
					<div class="toolButton eraserButton"><img class="img-responsive" src="images/eraser.png"></div>
					<div class="toolButton textButton"><img class="img-responsive" src="images/text.png"></div>
					<div class="toolButton findColorButton"><img class="img-responsive" src="images/colordropper.png"></div>

					<div class="toolButton lineButton"><img class="img-responsive" src="images/line.png"></div>
					<div class="toolButton circleButton"><img class="img-responsive" src="images/circle.png"></div>
					<div class="toolButton rectangleButton"><img class="img-responsive" src="images/rectangle.png"></div>
					<div class="toolButton quadraticCurveButton"><img class="img-responsive" src="images/curve.png"></div>
					<div class="toolButton polygonButton"><img class="img-responsive" src="images/polygon.png"></div>
				</div>
			</div>
			<hr class="mobileHidden">
			<!--Brush Size-->
			<div id="sizeMenu">
				<div class="showSize"><div class="sizeImage"></div></div>
				<div class="sizeSlider mobileHidden"><input type="range" min="1" max="51" value="5" step="2" class="slider" id="brushSize"></div>
			</div>
			<!--Color Palette-->
			<div id="colorPalette">
				<p class="mobileHidden">Stroke</p>
				<input type="button" class="jscolor colorButton" value="#000000" onchange="canvasSettings.changeStroke(this.jscolor)" id="colorStroke"></input>
				<p class="mobileHidden">Fill</p>
				<input type="button" class="jscolor colorButton" value="#ffffff" onchange="canvasSettings.changeFill(this.jscolor)" id="colorFill"></input>
			</div>
			<!--Admin Functions-->
			<div id="adminFunctions">
				<div class="mobileShow">
					<div class="adminDropdownButton inactive"><img class="img-responsive" src="images/settings.png"></div>
					<div class="menuClose inactive"><img class="img-responsive" src="images/close.png"></div>
				</div>
				<div class="adminDropdown mobileHidden">
					<div class="adminGroup">
						<div class="btn"><a id="download"><img class="img-responsive" src="images/download.png"></a></div>
						<div class="btn clearButton"><img class="img-responsive" src="images/clear.png"></div>
					</div>
					<div id="undoRedoGroup">
						<div class="btn undo"><img class="img-responsive" src="images/undo.png"></div>
						<div class="btn redo"><img class="img-responsive" src="images/redo.png"></div>
					</div>
				</div>
			</div>
		</div>

		<!--Canvas Section-->
		<div id="canvasContainer">
			<canvas id="canvas-real" class="canvas"></canvas>
			<canvas id="canvas-draft" class="canvas"></canvas>
			<input id="textInput" name="inputField" value=""></input>
		</div>

        <!--Javascript Libraries-->
		<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<script src="https://hammerjs.github.io/dist/hammer.min.js"></script>
		<script src="scripts/jscolor.min.js"></script>
		
		<!--Mother Script-->
		<script src="scripts/canvas-common.js"></script> 
		<script src="scripts/undo.js"></script>

		<!--Functions Scripts-->
		<script src="scripts/drawing-line.js"></script>
		<script src="scripts/drawing-rectangle.js"></script>
		<script src="scripts/drawing-circle.js"></script>
		<script src="scripts/drawing-freehand.js"></script>
		<script src="scripts/drawing-eraser.js"></script>
		<script src="scripts/drawing-quadraticCurve.js"></script>
		<script src="scripts/drawing-polygon.js"></script>
		<script src="scripts/drawing-text.js"></script>
		<script src="scripts/find-color.js"></script>
		<script src="scripts/open-file.js"></script>

		<!--Control Scripts-->
		<script src="scripts/canvas-configuration.js"></script> <!--Testing this script-->
		<script src="scripts/canvas-save.js"></script>
		<script src="scripts/drawing-clear.js"></script>

		<script type='text/javascript'>    
			//Initialize Canvas 
			currentFunction = new DrawingFreehand(contextReal,contextDraft);
			canvasReal.width = parseInt($("#canvasContainer").css("width").replace("px",""));
			canvasReal.height = parseInt($("#canvasContainer").css("height").replace("px",""));
			canvasDraft.width = parseInt($("#canvasContainer").css("width").replace("px",""));
			canvasDraft.height = parseInt($("#canvasContainer").css("height").replace("px",""));
			//Initialize canvas with white background
			contextReal.fillStyle = "white";
			contextReal.fillRect(0, 0, canvasReal.width, canvasReal.height);
			//Initialize blank canvas as undoObject's first state
			canvasSettings.undoObject.states[canvasSettings.undoObject.actionCount] = new Image();
			canvasSettings.undoObject.states[canvasSettings.undoObject.actionCount].src = canvasReal.toDataURL();
			canvasSettings.undoObject.actionCount++;

			//Keep canvas on resize
			$(window).resize(function(){
				if($(window).width()>300){
					var tempCanvas = document.createElement('canvas');
					var tempContext = tempCanvas.getContext('2d');
					tempCanvas.width = canvasReal.width;
					tempCanvas.height = canvasReal.height;
					tempContext.drawImage(canvasReal,0,0);
					canvasReal.width = parseInt($("#canvasContainer").css("width").replace("px",""));
					canvasReal.height = parseInt($("#canvasContainer").css("height").replace("px",""));
					canvasDraft.width = parseInt($("#canvasContainer").css("width").replace("px",""));
					canvasDraft.height = parseInt($("#canvasContainer").css("height").replace("px",""));
					contextReal.fillStyle = "white";
					contextReal.fillRect(0, 0, canvasReal.width, canvasReal.height);
					contextReal.drawImage(tempCanvas,0,0);
				}
			});
		</script>
	</body>
</html>
